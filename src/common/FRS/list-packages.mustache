<h1 class="project-administration-title">{{# gettext }}Files{{/ gettext }}</h1>
<div class="tlp-framed">
    <section class="tlp-pane">
        <div class="tlp-pane-container">
            <div class="tlp-pane-header">
                <h1 class="tlp-pane-title">
                    <i class="fa-solid fa-list tlp-pane-title-icon" aria-hidden="true"></i>
                    {{# gettext }}Packages{{/ gettext }}
                </h1>
            </div>
            <div class="tlp-pane-section">
                {{# can_admin }}
                    <div class="tlp-table-actions">
                        <a href="{{ add_url }}"
                           class="tlp-button-primary tlp-table-actions-element"
                           data-test="create-new-package"
                        >
                            <i class="tlp-button-icon fa-solid fa-plus" aria-hidden="true"></i>
                            {{# gettext }}Create new package{{/ gettext }}
                        </a>
                    </div>
                {{/ can_admin }}
                <table class="tlp-table" data-test="packages-list">
                    <thead>
                        <tr>
                            <th>{{# gettext }}Package{{/ gettext }}</th>
                            <th></th>
                        </tr>
                    </thead>
                    {{^ has_packages }}
                        <tbody>
                            <tr>
                                <td colspan="2" class="tlp-table-cell-empty">
                                    {{# gettext }}There isn't any package yet{{/ gettext }}
                                </td>
                            </tr>
                    {{/ has_packages }}
                    {{# has_packages }}
                        <tbody>
                            {{# packages }}
                                <tr>
                                    <td>
                                        {{# name }}
                                            <a href="{{ show_url }}" {{# is_hidden }}class="tlp-text-muted"{{/ is_hidden }} data-test="package-name">
                                                {{ . }}
                                            </a>
                                        {{/ name }}
                                        {{^ name }}
                                            <em class="tlp-text-muted">
                                                {{# gettext }}Unnamed package{{/ gettext }}
                                            </em>
                                            <span class="tlp-text-danger frs-unnamed-package">
                                                <i class="fa-solid fa-circle-exclamation" aria-hidden="true"></i>
                                                {{# gettext }}This package has no name, this is not supported.{{/ gettext }}
                                            </span>
                                        {{/ name }}
                                        {{# is_hidden }}
                                            <span class="tlp-badge-secondary tlp-badge-outline" title="{{# gettext }}This package is hidden{{/ gettext }}">
                                                <i class="tlp-badge-icon fa-solid fa-eye-slash" aria-hidden="true"></i>
                                                {{# gettext }}hidden{{/ gettext }}
                                            </span>
                                        {{/ is_hidden }}
                                    </td>
                                    <td class="tlp-table-cell-actions">
                                        <a class="tlp-table-cell-actions-button tlp-button-small tlp-button-primary tlp-button-outline"
                                           href="{{ monitor_url }}"
                                        >
                                            {{# is_monitoring }}
                                                <i class="tlp-button-icon fa-solid fa-bell-slash" aria-hidden="true"></i>
                                                {{# gettext }}Stop monitoring{{/ gettext }}
                                            {{/ is_monitoring }}
                                            {{^ is_monitoring }}
                                                <i class="tlp-button-icon fa-solid fa-bell" aria-hidden="true"></i>
                                                {{# gettext }}Monitor{{/ gettext }}
                                            {{/ is_monitoring }}
                                        </a>

                                        {{# can_admin }}
                                            <a class="tlp-table-cell-actions-button tlp-button-small tlp-button-primary tlp-button-outline"
                                               href="{{ edit_url }}"
                                               data-test="update-package"
                                            >
                                                <i class="tlp-button-icon fa-solid fa-pencil" aria-hidden="true"></i>
                                                {{# gettext }}Edit{{/ gettext }}
                                            </a>
                                        {{/ can_admin }}

                                        {{# can_admin }}
                                            {{> delete-package-modal }}
                                            <button type="button"
                                                class="tlp-table-cell-actions-button tlp-button-small tlp-button-danger tlp-button-outline frs-modal-trigger-button"
                                                data-target-modal-id="frs-delete-package-{{ id }}"
                                                data-test="remove-package"
                                                {{# has_releases }}
                                                    disabled
                                                    title="{{# gettext }}You cannot delete a package that still contains releases{{/ gettext }}"
                                                {{/ has_releases }}
                                            >
                                                <i class="tlp-button-icon fa-regular fa-trash-alt" aria-hidden="true"></i>
                                                {{# gettext }}Delete{{/ gettext }}
                                            </button>
                                        {{/ can_admin }}
                                    </td>
                                </tr>
                            {{/ packages }}
                        </tbody>
                    {{/ has_packages }}
                </table>
            </div>
        </div>
    </section>
    {{# should_display_stats }}
        <p>
            <b>{{# gettext }}Project totals:{{/ gettext }}</b>
            {{# stats }}
                {{# gettext }}
                    {{ releases }} releases, {{ files }} files, {{ size_in_kb }} Kb, {{ downloads }} downloads.
                {{/ gettext }}
            {{/ stats }}
        </p>
    {{/ should_display_stats }}
</div>
