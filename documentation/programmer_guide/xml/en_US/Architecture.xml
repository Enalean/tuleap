<!--
//
// CodeX: Breaking Down the Barriers to Source Code Sharing inside Xerox
// Copyright (c) Xerox Corporation, CodeX, 2001-2004. All Rights Reserved
// This file is licensed under the CodeX Component Software License
// http://codex.xerox.com
//
// $Id: Architecture.xml 1056 2004-07-01 09:23:49 +0000 (Thu, 01 Jul 2004) guerin $
//
// Originally written by Nicolas Guerin 2004, CodeX Team, Xerox
//
-->

  <chapter id="CodeXArchitecture">
    <title>CodeX Architecture</title>
    <para></para>
    
    <section id="Implementation">
      <title>CodeX Implementation</title>
      <para></para>
      <section id="sourceforgedotnet">
        <title>SourceForge.net Software</title>
        <para>CodeX is based on the open source platform SourceForge.net 2.0.
          For this reason, a large amount of the CodeX code is based on SourceForge source code.
          However, recent versions of SourceForge are no longer open source, so there is no new code coming from that project.
        </para>
        
      </section>
      
      <section>
        <title>Based on Open Source software</title>
        <itemizedlist mark="bullet" spacing="compact">
          <listitem>
            <para><emphasis role="bold">Linux Distribution</emphasis> CodeX is supported on a very specific platform. For instance, CodeX 2.0 is supported on RedHat 7.2, whereas CodeX 2.2 is supported on RedHat Enterprise Server 3.0 (and maybe others)</para>
          </listitem>
          
          <listitem>
            <para><emphasis role="bold">Apache</emphasis> web server with additionnal modules: mod_php, mod_dav, and others. </para>
          </listitem>
          
          <listitem>
            <para><emphasis role="bold">MySQL</emphasis> Database Manager</para>
          </listitem>
          
          <listitem>
            <para><emphasis role="bold">CVS and FTP servers</emphasis></para>
          </listitem>
    
          <listitem>
            <para><emphasis role="bold">Mailman</emphasis> mailing list manager</para>
          </listitem>
          
          <listitem>
            <para><emphasis role="bold">PHP, Python and Perl programming languages.</emphasis></para>
          </listitem>
    
        </itemizedlist>

        <para>Note that CodeX 2.0 is built on top of Apache 1.3 and PHP3. CodeX 2.2 runs on Apache 2.0 and PHP4.
        </para>
      </section>
      

    </section>
    
    <section id="Architecture">
      <title>Architecture</title>
      <para>This figure gives an overview of the CodeX software architecture:
      </para>
      <figure id="FigureArchitecture">
        <title>CodeX Architecture</title>
        
        <mediaobject>
          <imageobject>
            <imagedata fileref="../../slides/en_US/CodeX_Architecture.png" format="PNG"/>
          </imageobject>
        </mediaobject>
      </figure>

    </section>
    <section id="FactsAndFigures">
      <title>CodeX Facts and Figures</title>
      <para>As of June 2004, CodeX code is made of:</para>
      <itemizedlist spacing="compact" mark="bullet">
        <listitem>
          <para>65,000 lines of PHP code (including a lot of HTML)</para>
        </listitem>
        
        <listitem>
          <para>7,000 lines of Perl</para>
        </listitem>
        <listitem>
          <para>7,000 lines of SQL</para>
        </listitem>
        <listitem>
          <para>2,000 lines of Shell scripts</para>
        </listitem>
        <listitem>
          <para>1,300 lines of C code (mostly unused!)</para>
        </listitem>
      </itemizedlist>
    </section>


    <section id="DatabaseStructure">
      <title>Database Structure</title>
      <para>CodeX database contains over 180 tables. All project data (except file releases, mailing lists and project web site) is stored in the database. This includes documentation, artifact attachments, patches and code snippets.</para>
      <para>Most tables correspond to a specific service. E.g. all tables with names starting with 'artifact_' are used by the tracker service. Note that 'bug_', 'support_' and most 'project_' tables deal with the three legacy trackers (bugs, support request and task manager).</para>
      <para>Then, some tables are at site level: 'snippet_', 'stats_', 'trove_', etc.</para>
      <para>And last, there are also a few important tables that are referenced in many others, e.g.:</para>
      <itemizedlist spacing="compact" mark="bullet">
        <listitem>
          <para><emphasis role="bold"><literal>groups</literal></emphasis> contains project data (e.g. defined at creation time), and most notably defines the <literal>group_id</literal>, used almost everywhere!</para>
        </listitem>
        
        <listitem>
          <para><emphasis role="bold"><literal>user</literal></emphasis> contains CodeX registered users data: user ID, name, login and encrypted password, status, etc.</para>
        </listitem>
      </itemizedlist>
    </section>
  </chapter>

  <!--
  Local Variables:
  sgml-parent-document: ("CodeX_Programmer_Guide.xml" "book" "chapter")
  End:
  -->
