<form method="POST" action="{{ form_action_url }}" class="tlp-pane-container">
    {{# csrf_token }}
        {{> csrf_token_input }}
    {{/ csrf_token }}
    <input type="hidden" id="repo_id" name="repo_id" value="{{ repository_id }}" />

    <section class="tlp-pane">
        <div class="tlp-pane-container">
            <div class="tlp-pane-header">
                <h1 class="tlp-pane-title">{{# dgettext }} tuleap-git | Token for Continuous Integration {{/ dgettext }}</h1>
            </div>

            <div class="tlp-pane-section">
                <p>
                    {{# dgettext }} tuleap-git | This token is used to authenticate CIs like Jenkins when calling the build status update APIs {{/ dgettext }}
                </p>

                <div class="tlp-form-element">
                    <label class="tlp-label" for="token">
                        {{# dgettext }} tuleap-git | Token {{/ dgettext }}
                    </label>
                    <div class="tlp-form-element tlp-form-element-append">
                        <input
                            type="text"
                            class="tlp-input"
                            id="token"
                            readonly
                            disabled
                            placeholder="{{# dgettext }} tuleap-git | No CI Token {{/ dgettext }}"
                            value="{{# ci_token }}{{ . }}{{/ ci_token }}"
                        >
                        <button type="submit" name="action" value="generate-ci-token" class="tlp-button-danger tlp-button-outline tlp-append">
                            <i class="fa-solid fa-arrows-rotate tlp-button-icon" aria-hidden="true"></i>
                            {{# dgettext }} tuleap-git | Reset token {{/ dgettext }}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {{> set-build-status-permissions }}
</form>
