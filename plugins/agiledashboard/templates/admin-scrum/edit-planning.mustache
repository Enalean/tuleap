<h1 class="agiledashboard-administration-title">
    {{# dgettext }} tuleap-agiledashboard | Backlog administration {{/ dgettext }}
</h1>

<div class="tlp-framed">
    <section class="tlp-pane">
        <div class="tlp-pane-container">
            <div class="tlp-pane-header">
                <h1 class="tlp-pane-title">
                    {{# dgettext }} tuleap-agiledashboard | Edit planning: %s | {{ planning_name }}{{/ dgettext }}
                </h1>
            </div>

            <form method="post" action="/plugins/agiledashboard/?group_id={{ project_id }}&planning_id={{ planning_id }}&action=update" >
            {{# csrf_token }}
                {{> csrf_token_input }}
            {{/csrf_token}}
            <section class="tlp-pane-section">
                <div class="tlp-form-element">
                    <label class="tlp-label" for="planning_name">{{# dgettext }}
                        tuleap-agiledashboard | Name{{/ dgettext }}</label>
                    <input class="tlp-input" type="text" name="planning[name]" id="planning_name"
                           value="{{ planning_name }}"
                           data-test="planning-name-input"
                           size="30" />
                </div>
                <div class="tlp-form-element">
                    <label class="tlp-label" for="planning_backlog_title">{{# dgettext }}
                        tuleap-agiledashboard | Backlog title{{/ dgettext }}</label>
                    <input class="tlp-input" type="text" name="planning[backlog_title]" id="planning_backlog_title"
                           value="{{ planning_backlog_title }}" size="30" />
                </div>
                <div class="tlp-form-element">
                    <label class="tlp-label" for="planning_plan_title">{{# dgettext }}
                        tuleap-agiledashboard | Plan title{{/ dgettext }}</label>
                    <input class="tlp-input" type="text" name="planning[plan_title]" id="planning_plan_title"
                           value="{{ planning_plan_title }}" size="30" />
                </div>
                <div class="tlp-form-element">
                    <label class="tlp-label" for="user_groups">{{# dgettext }}
                        tuleap-agiledashboard | Who can prioritize items?{{/ dgettext }}</label>
                    {{{ priority_change_permission }}}
                </div>

                {{# has_warning }}
                    <div class="tlp-alert-warning">
                        <ul>
                            <li>
                                {{# dgettext }}
                                    tuleap-agiledashboard |
                                    Update of planning assignment may lead to errors in:
                                {{/ dgettext }}
                                <ul>
                                    {{# warning_list }}
                                        <li><a href="{{ url }}">{{ name }}</a></li>
                                    {{/ warning_list }}
                                </ul>
                            </li>
                            <li>
                                {{# dgettext }}
                                    tuleap-agiledashboard |
                                    Make sure to check their configuration.
                                {{/ dgettext }}
                            </li>
                        </ul>
                    </div>
                {{/ has_warning }}

                {{# milestone_tracker_modification_ban }}
                    <div class="tlp-alert-warning">{{ message }}</div>
                {{/ milestone_tracker_modification_ban }}

                <div class="agiledashboard-planning-setup">
                    <div class="tlp-form-element">
                        <label class="tlp-label" for="backlog_tracker_ids">
                            {{# dgettext }} tuleap-agiledashboard | This planning allows assignment of{{/ dgettext}}
                        </label>
                        <select class="tlp-select" name="planning[backlog_tracker_ids][]" multiple="multiple"
                                id="backlog_tracker_ids">
                            {{# available_backlog_trackers }}
                                <option value="{{ id }}" {{# selected }} selected {{/ selected }}>{{ name }}</option>
                            {{/ available_backlog_trackers }}
                        </select>
                    </div>
                    <div class="tlp-form-element">
                        <label class="tlp-label" id="planning_tracker_id">
                            {{# dgettext }} tuleap-agiledashboard | to{{/ dgettext}}
                        </label>
                        <select class="tlp-select tlp-select-adjusted" name="planning[planning_tracker_id]" id="planning_tracker_id"
                                {{# milestone_tracker_modification_ban }}disabled{{/ milestone_tracker_modification_ban }}>
                            {{# available_planning_trackers }}
                                <option value="{{ id }}" {{# selected }} selected {{/ selected }}>{{ name }}</option>
                            {{/ available_planning_trackers }}
                        </select>
                    </div>
                </div>
            </section>

            <section class="tlp-pane-section">
                {{{ cardwall_admin }}}
            </section>

            <section class="tlp-pane-section tlp-pane-section-submit">
                <input class="tlp-button-primary" data-test="update-planning-configuration" type="submit"
                       value="{{# dgettext }}tuleap-agiledashboard | Submit{{/ dgettext }}" />
            </section>
            </form>
        </div>
    </section>
</div>
