<form id="svn-notification-edit-modal-{{ notification_id }}"
      role="dialog"
      aria-labelledby="svn-notification-edit-modal-{{ notification_id }}-title"
      class="tlp-modal"
      action="/plugins/svn/?group_id={{ project_id }}&repo_id={{ repository_id }}&action=update-mailing-lists"
      method="post"
>
    <div class="tlp-modal-header">
        <h1 class="tlp-modal-title" id="svn-notification-edit-modal-{{ notification_id }}-title">
            {{# dgettext }}tuleap-svn | Edit notification {{/dgettext}}
        </h1>
        <button class="tlp-modal-close" type="button" data-dismiss="modal" aria-label="{{# gettext }}Close{{/ gettext }}">
            <i class="fa-solid fa-xmark tlp-modal-close-icon" aria-hidden="true"></i>
        </button>
    </div>
    <div class="tlp-modal-body">
        <div class="tlp-form-element">
            <label class="tlp-label" for="path-{{ notification_id }}">
                {{# dgettext }}tuleap-svn | Monitored path {{/dgettext}}
                <i class="fa-solid fa-asterisk" aria-hidden="true"></i>
            </label>
            <input type="text"
                   required
                   class="tlp-input"
                   name="notification_update[{{ notification_id }}][path]"
                   value="{{ path }}"
                   data-notification-id="{{ notification_id }}"
                   placeholder="/path/to/folder/"
                   id="path-{{ notification_id }}"
            >
        </div>

        <div class="tlp-form-element">
            <label class="tlp-label" for="ugroups-edit-{{ notification_id }}">
                {{# dgettext }}tuleap-svn | User groups that will receive the notification {{/dgettext}}
            </label>
            <select id="ugroups-edit-{{ notification_id }}"
                    data-test="svn-edit-ugroups"
                    name="notification_update[{{ notification_id }}][ugroup_ids][]"
                    class="tlp-select"
                    multiple
            >
                {{# ugroups }}
                    <option value="{{ id }}" {{# selected }}selected{{/ selected }}>{{ name }}</option>
                {{/ ugroups }}
            </select>
        </div>

        <div class="tlp-form-element svn-monitor-autocompleter-user"
             data-id="user-edit-{{ notification_id }}"
             data-name="notification_update[{{ notification_id }}][users]"
             data-existing="{{ users_to_be_notified_json }}"
         >
            <label class="tlp-label" for="user-edit-{{ notification_id }}">
                {{# dgettext }}tuleap-svn | Users who will receive the notification {{/dgettext}}
            </label>
        </div>

        <div class="tlp-form-element">
            <label class="tlp-label" for="email-edit-{{ notification_id }}">
                {{# dgettext }}tuleap-svn | Emails who will receive the notification {{/dgettext}}
            </label>
            <input type="text"
                   id="email-edit-{{ notification_id }}"
                   data-test="svn-edit-email"
                   name="notification_update[{{ notification_id }}][emails]"
                   class="tlp-input"
                   placeholder="developers@example.com"
                   value="{{ comma_separated_emails_to_be_notified }}"
            />
            <p class="tlp-text-info">
                {{# dgettext }}tuleap-svn | A comma-separated list of email addresses. {{/dgettext}}
                {{# dgettext }}tuleap-svn | These can be mailing list addresses or external recipients. {{/dgettext}}
            </p>
        </div>

        <input type="hidden" name="group_id" value="{{ project_id }}">
        <input type="hidden" name="repo_id" value="{{ repository_id }}">
        {{# csrf_token }}
            {{> csrf_token_input }}
        {{/csrf_token}}
    </div>
    <div class="tlp-modal-footer">
      <button type="button" data-dismiss="modal" class="tlp-button-primary tlp-button-outline tlp-modal-action">
          {{# gettext }}Cancel{{/ gettext }}
      </button>
      <button type="submit"
              class="tlp-button-primary tlp-modal-action"
              name="save-mailing-lists"
              value="1"
              data-test="svn-save-notifications"
      >
          <i class="fa-solid fa-save tlp-button-icon" aria-hidden="true"></i>
          {{ save }}
      </button>
    </div>
</form>
